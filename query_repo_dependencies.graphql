query RepoDependencies(
  $owner: String!
  $name: String!
  $manifestsAfter: String!
  $manifestsCount: Int!
  $dependenciesAfter: String!
  $submodulesAfter: String!
  $submodulesCount: Int!
) {
  repository(owner: $owner, name: $name) {
    dependencyGraphManifests(
      first: $manifestsCount
      after: $manifestsAfter
      withDependencies: true
    ) {
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        dependencies(first: 100, after: $dependenciesAfter) {
          pageInfo {
            hasNextPage
            endCursor
          }
          nodes {
            packageManager
            repository {
              nameWithOwner
            }
          }
        }
      }
    }
    submodules(first: $submodulesCount, after: $submodulesAfter) {
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        gitUrl
      }
    }
  }
}
